!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a="undefined"==typeof globalThis?a||self:globalThis).LazyLoad=b()}(this,function(){"use strict";function b(){return b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},b.apply(this,arguments)}var d="undefined"!=typeof window,f=d&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),e=d&&"IntersectionObserver"in window,g=d&&"classList"in document.createElement("p"),h=d&&1<window.devicePixelRatio,a={elements_selector:".lazy",container:f||d?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},i=function(c){return b({},a,c)},c=function(a,b){var c,d=new a(b);try{c=new CustomEvent("LazyLoad::Initialized",{detail:{instance:d}})}catch(a){(c=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:d})}window.dispatchEvent(c)},l=function(a,b){return a.getAttribute("data-"+b)},m=function(a){return l(a,"ll-status")},k=function(a,b){return function(a,b,c){null===c?a.removeAttribute("data-ll-status"):a.setAttribute("data-ll-status",c)}(a,0,b)},o=function(a){return k(a,null)},p=function(a){return null===m(a)},r=function(a){return m(a)==="native"},s=["loading","loaded","applied","error"],u=function(a,b,c,d){a&&(void 0===d?void 0===c?a(b):a(b,c):a(b,c,d))},v=function(a,b){g?a.classList.add(b):a.className+=(a.className?" ":"")+b},w=function(a,b){g?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},x=function(a){return a.llTempImage},y=function(a,b){if(b){var c=b._observer;c&&c.unobserve(a)}},z=function(a,b){a&&(a.loadingCount+=b)},A=function(a,b){a&&(a.toLoadCount=b)},C=function(a){for(var b,c=[],d=0;b=a.children[d];d+=1)"SOURCE"===b.tagName&&c.push(b);return c},j=function(a,b){var c=a.parentNode;c&&"PICTURE"===c.tagName&&C(c).forEach(b)},D=function(a,b){C(a).forEach(b)},E=["src"],G=["src","poster"],F=["src","srcset","sizes"],B=["data"],H=function(a){return!!a.llOriginalAttrs},I=function(a){return a.llOriginalAttrs},J=function(a){return delete a.llOriginalAttrs},L=function(a,b){if(!H(a)){var c={};b.forEach(function(b){c[b]=a.getAttribute(b)}),a.llOriginalAttrs=c}},M=function(a,b){if(H(a)){var c=I(a);b.forEach(function(b){!function(a,b,c){c?a.setAttribute(b,c):a.removeAttribute(b)}(a,b,c[b])})}},q=function(a,b,c){v(a,b.class_applied),k(a,"applied"),c&&(b.unobserve_completed&&y(a,b),u(b.callback_applied,a,c))},K=function(a,b,c){v(a,b.class_loading),k(a,"loading"),c&&(z(c,1),u(b.callback_loading,a,c))},N=function(a,b,c){c&&a.setAttribute(b,c)},O=function(a,b){N(a,"sizes",l(a,b.data_sizes)),N(a,"srcset",l(a,b.data_srcset)),N(a,"src",l(a,b.data_src))},P={IMG:function(a,b){j(a,function(a){L(a,F),O(a,b)}),L(a,F),O(a,b)},IFRAME:function(a,b){L(a,E),N(a,"src",l(a,b.data_src))},VIDEO:function(a,b){D(a,function(a){L(a,E),N(a,"src",l(a,b.data_src))}),L(a,G),N(a,"poster",l(a,b.data_poster)),N(a,"src",l(a,b.data_src)),a.load()},OBJECT:function(a,b){L(a,B),N(a,"data",l(a,b.data_src))}},t=["IMG","IFRAME","VIDEO","OBJECT"],Q=function(a,b){!b||function(a){return 0<a.loadingCount}(b)||function(a){return 0<a.toLoadCount}(b)||u(a.callback_finish,b)},R=function(a,b,c){a.addEventListener(b,c),a.llEvLisnrs[b]=c},S=function(a,b,c){a.removeEventListener(b,c)},T=function(a){return!!a.llEvLisnrs},U=function(a){if(T(a)){var b=a.llEvLisnrs;for(var c in b){var d=b[c];S(a,c,d)}delete a.llEvLisnrs}},V=function(a,b,c){!function(a){delete a.llTempImage}(a),z(c,-1),function(a){a&&(a.toLoadCount-=1)}(c),w(a,b.class_loading),b.unobserve_completed&&y(a,c)},W=function(a,b,c){var d=x(a)||a;T(d)||function(a,b,c){T(a)||(a.llEvLisnrs={});var d="VIDEO"===a.tagName?"loadeddata":"load";R(a,d,b),R(a,"error",c)}(d,function(){!function(a,b,c,d){var e=r(b);V(b,c,d),v(b,c.class_loaded),k(b,"loaded"),u(c.callback_loaded,b,d),e||Q(c,d)}(0,a,b,c),U(d)},function(){!function(a,b,c,d){var e=r(b);V(b,c,d),v(b,c.class_error),k(b,"error"),u(c.callback_error,b,d),c.restore_on_error&&M(b,F),e||Q(c,d)}(0,a,b,c),U(d)})},X=function(a,b,c){(function(a){return-1<t.indexOf(a.tagName)})(a)?function(a,b,c){W(a,b,c),function(a,b,c){var d=P[a.tagName];d&&(d(a,b),K(a,b,c))}(a,b,c)}(a,b,c):function(a,b,c){!function(a){a.llTempImage=document.createElement("IMG")}(a),W(a,b,c),function(a){H(a)||(a.llOriginalAttrs={backgroundImage:a.style.backgroundImage})}(a),function(a,b,c){var d=l(a,b.data_bg),e=l(a,b.data_bg_hidpi),f=h&&e?e:d;f&&(a.style.backgroundImage="url(\"".concat(f,"\")"),x(a).setAttribute("src",f),K(a,b,c))}(a,b,c),function(a,b,c){var d=l(a,b.data_bg_multi),e=l(a,b.data_bg_multi_hidpi),f=h&&e?e:d;f&&(a.style.backgroundImage=f,q(a,b,c))}(a,b,c),function(b,c,d){var e=l(b,c.data_bg_set);if(e){var f=e.split("|"),g=f.map(function(a){return"image-set(".concat(a,")")});b.style.backgroundImage=g.join(),""===b.style.backgroundImage&&(g=f.map(function(a){return"-webkit-image-set(".concat(a,")")}),b.style.backgroundImage=g.join()),q(b,c,d)}}(a,b,c)}(a,b,c)},Y=function(a){a.removeAttribute("src"),a.removeAttribute("srcset"),a.removeAttribute("sizes")},Z=function(a){j(a,function(a){M(a,F)}),M(a,F)},$={IMG:Z,IFRAME:function(a){M(a,E)},VIDEO:function(a){D(a,function(a){M(a,E)}),M(a,G),a.load()},OBJECT:function(a){M(a,B)}},_=function(a,b){(function(a){var b=$[a.tagName];b?b(a):function(a){if(H(a)){var b=I(a);a.style.backgroundImage=b.backgroundImage}}(a)})(a),function(a,b){p(a)||r(a)||(w(a,b.class_entered),w(a,b.class_exited),w(a,b.class_applied),w(a,b.class_loading),w(a,b.class_loaded),w(a,b.class_error))}(a,b),o(a),J(a)},aa=["IMG","IFRAME","VIDEO"],ba=function(a){return a.use_native&&"loading"in HTMLImageElement.prototype},ca=function(a,b,c){a.forEach(function(a){return function(a){return a.isIntersecting||0<a.intersectionRatio}(a)?function(a,b,c,d){var e=function(a){return 0<=s.indexOf(m(a))}(a);k(a,"entered"),v(a,c.class_entered),w(a,c.class_exited),function(a,b,c){b.unobserve_entered&&y(a,c)}(a,c,d),u(c.callback_enter,a,b,d),e||X(a,c,d)}(a.target,a,b,c):function(a,b,c,d){p(a)||(v(a,c.class_exited),function(a,b,c,d){c.cancel_on_exit&&function(a){return m(a)==="loading"}(a)&&"IMG"===a.tagName&&(U(a),function(a){j(a,function(a){Y(a)}),Y(a)}(a),Z(a),w(a,c.class_loading),z(d,-1),o(a),u(c.callback_cancel,a,b,d))}(a,b,c,d),u(c.callback_exit,a,b,d))}(a.target,a,b,c)})},da=function(a){return Array.prototype.slice.call(a)},ea=function(a){return a.container.querySelectorAll(a.elements_selector)},fa=function(a){return function(a){return m(a)==="error"}(a)},ga=function(a,b){return function(a){return da(a).filter(p)}(a||ea(b))},ha=function(a,b){var c=i(a);this._settings=c,this.loadingCount=0,function(a,b){e&&!ba(a)&&(b._observer=new IntersectionObserver(function(c){ca(c,a,b)},function(a){return{root:a.container===document?null:a.container,rootMargin:a.thresholds||a.threshold+"px"}}(a)))}(c,this),function(a,b){d&&(b._onlineHandler=function(){!function(a,b){var c;(c=ea(a),da(c).filter(fa)).forEach(function(b){w(b,a.class_error),o(b)}),b.update()}(a,b)},window.addEventListener("online",b._onlineHandler))}(c,this),this.update(b)};return ha.prototype={update:function(b){var c,d,g=this._settings,a=ga(b,g);A(this,a.length),!f&&e?ba(g)?function(a,b,c){a.forEach(function(a){-1!==aa.indexOf(a.tagName)&&function(a,b,c){a.setAttribute("loading","lazy"),W(a,b,c),function(a,b){var c=P[a.tagName];c&&c(a,b)}(a,b),k(a,"native")}(a,b,c)}),A(c,0)}(a,g,this):(d=a,function(a){a.disconnect()}(c=this._observer),function(a,b){b.forEach(function(b){a.observe(b)})}(c,d)):this.loadAll(a)},destroy:function(){this._observer&&this._observer.disconnect(),d&&window.removeEventListener("online",this._onlineHandler),ea(this._settings).forEach(function(a){J(a)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(a){var b=this,c=this._settings;ga(a,c).forEach(function(a){y(a,b),X(a,c,b)})},restoreAll:function(){var a=this._settings;ea(a).forEach(function(b){_(b,a)})}},ha.load=function(a,b){var c=i(b);X(a,c)},ha.resetStatus=function(a){o(a)},d&&function(a,b){if(b)if(b.length)for(var d,f=0;d=b[f];f+=1)c(a,d);else c(a,b)}(ha,window.lazyLoadOptions),ha});
